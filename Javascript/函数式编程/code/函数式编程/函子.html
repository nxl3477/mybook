<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
const Container = function(x) {
    this.__value = x;
}

// 函数式编程一般约定， 函子有一个of方法
Container.of = x => new Container(x)
// Container.of('abcd')

// 一般约定， 函子的标志就是容器具有map方法。 该方法将容器里面的每一个值， 映射到另一个容器
Container.prototype.map = function(f) {
    return Container.of(f(this.__value))
}

var temp = Container.of(3)
    .map(x => x + 1)     // => Container(4)
    .map(x => 'Result' + x) // => Container("Result is 4")

console.log(temp)

// ------------------------ ES6实现 --------------------

class Functor {
    constructor(val) {
        this.val = val;
    }

    map(f) {
        return new Functor(f(this.val))
    }
}

console.log( new Functor(12) )


(new Function(2)).map((two) => {
    return two + 2
})









</script>
</html>